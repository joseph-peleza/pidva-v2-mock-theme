{"version":3,"sources":["routes/extensions/map/googlemap/geoLocation/Components/GeoLocation.js","routes/extensions/map/googlemap/geoLocation/index.js"],"names":["geolocation","canUseDOM","navigator","getCurrentPosition","success","failure","GeolocationExampleGoogleMap","withGoogleMap","props","defaultZoom","center","position","content","radius","options","fillColor","fillOpacity","strokeColor","strokeOpacity","strokeWeight","GeolocationExample","state","isUnmounted","tick","setState","Math","max","raf","lat","coords","latitude","lng","longitude","reason","this","loadingElement","style","height","containerElement","mapElement","Component","GeoLocation","className","title","IntlMessages","id"],"mappings":"+PAKMA,EACJC,KAAaC,UAAUF,YACrBE,UAAUF,YACT,CACCG,mBADD,SACoBC,EAASC,GAC1BA,EAAQ,+CAKVC,EAA8BC,yBAAc,SAAAC,GAAK,OACrD,eAAC,YAAD,CACEC,YAAa,GACbC,OAAQF,EAAME,OAFhB,UAIGF,EAAME,QACL,cAAC,aAAD,CAAYC,SAAUH,EAAME,OAA5B,SACE,8BAAMF,EAAMI,YAGfJ,EAAME,QACL,cAAC,SAAD,CACEA,OAAQF,EAAME,OACdG,OAAQL,EAAMK,OACdC,QAAS,CACPC,UAAW,MACXC,YAAa,GACbC,YAAa,MACbC,cAAe,EACfC,aAAc,WAYHC,E,4MAEnBC,MAAQ,CACNX,OAAQ,KACRE,QAAS,KACTC,OAAQ,K,EAGVS,aAAc,E,uDAEd,WAAqB,IAAD,OACZC,EAAO,SAAPA,IACA,EAAKD,cAGT,EAAKE,SAAS,CAACX,OAAQY,KAAKC,IAAI,EAAKL,MAAMR,OAAS,GAAI,KAEpD,EAAKQ,MAAMR,OAAS,KACtBc,IAAIJ,KAGRvB,EAAYG,oBAAmB,SAACQ,GAC1B,EAAKW,cAGT,EAAKE,SAAS,CACZd,OAAQ,CACNkB,IAAKjB,EAASkB,OAAOC,SACrBC,IAAKpB,EAASkB,OAAOG,WAEvBpB,QAAQ,gCAGVe,IAAIJ,OACH,SAACU,GACE,EAAKX,aAGT,EAAKE,SAAS,CACZd,OAAQ,CACNkB,IAAK,GACLG,IAAK,KAEPnB,QAAQ,0CAAD,OAA4CqB,EAA5C,a,kCAKb,WACEC,KAAKZ,aAAc,I,oBAGrB,WACE,OACE,cAAChB,EAAD,CACE6B,eAAgB,qBAAKC,MAAO,CAACC,OAAO,UACpCC,iBAAkB,qBAAKF,MAAO,CAACC,OAAO,WACtCE,WAAY,qBAAKH,MAAO,CAACC,OAAO,UAChC3B,OAAQwB,KAAKb,MAAMX,OACnBE,QAASsB,KAAKb,MAAMT,QACpBC,OAAQqB,KAAKb,MAAMR,a,GA5DqB2B,a,OC/BjCC,UARK,WAClB,OACE,mBAAMC,UAAU,UAAUC,MAAO,cAACC,EAAA,EAAD,CAAcC,GAAG,4BAAlD,SACE,cAAC,EAAD","file":"static/js/154.91169d10.chunk.js","sourcesContent":["import React, {Component} from \"react\";\r\nimport {Circle, GoogleMap, InfoWindow, withGoogleMap} from \"react-google-maps\";\r\nimport canUseDOM from \"can-use-dom\";\r\nimport raf from \"raf\";\r\n\r\nconst geolocation = (\r\n  canUseDOM && navigator.geolocation ?\r\n    navigator.geolocation :\r\n    ({\r\n      getCurrentPosition(success, failure) {\r\n        failure(`Your browser doesn't support geolocation.`);\r\n      },\r\n    })\r\n);\r\n\r\nconst GeolocationExampleGoogleMap = withGoogleMap(props => (\r\n  <GoogleMap\r\n    defaultZoom={10}\r\n    center={props.center}\r\n  >\r\n    {props.center && (\r\n      <InfoWindow position={props.center}>\r\n        <div>{props.content}</div>\r\n      </InfoWindow>\r\n    )}\r\n    {props.center && (\r\n      <Circle\r\n        center={props.center}\r\n        radius={props.radius}\r\n        options={{\r\n          fillColor: 'red',\r\n          fillOpacity: 0.20,\r\n          strokeColor: 'red',\r\n          strokeOpacity: 1,\r\n          strokeWeight: 1,\r\n        }}\r\n      />\r\n    )}\r\n  </GoogleMap>\r\n));\r\n\r\n/*\r\n * https://developers.google.com/maps/documentation/javascript/examples/map-geolocation\r\n *\r\n * Add <script src=\"https://maps.googleapis.com/maps/api/js\"></script> to your HTML to provide google.maps reference\r\n */\r\nexport default class GeolocationExample extends Component {\r\n\r\n  state = {\r\n    center: null,\r\n    content: null,\r\n    radius: 6000,\r\n  };\r\n\r\n  isUnmounted = false;\r\n\r\n  componentDidMount() {\r\n    const tick = () => {\r\n      if (this.isUnmounted) {\r\n        return;\r\n      }\r\n      this.setState({radius: Math.max(this.state.radius - 20, 0)});\r\n\r\n      if (this.state.radius > 200) {\r\n        raf(tick);\r\n      }\r\n    };\r\n    geolocation.getCurrentPosition((position) => {\r\n      if (this.isUnmounted) {\r\n        return;\r\n      }\r\n      this.setState({\r\n        center: {\r\n          lat: position.coords.latitude,\r\n          lng: position.coords.longitude,\r\n        },\r\n        content: `Location found using HTML5.`,\r\n      });\r\n\r\n      raf(tick);\r\n    }, (reason) => {\r\n      if (this.isUnmounted) {\r\n        return;\r\n      }\r\n      this.setState({\r\n        center: {\r\n          lat: 60,\r\n          lng: 105,\r\n        },\r\n        content: `Error: The Geolocation service failed (${reason}).`,\r\n      });\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.isUnmounted = true;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <GeolocationExampleGoogleMap\r\n        loadingElement={<div style={{height: `100%`}}/>}\r\n        containerElement={<div style={{height: `550px`}}/>}\r\n        mapElement={<div style={{height: `100%`}}/>}\r\n        center={this.state.center}\r\n        content={this.state.content}\r\n        radius={this.state.radius}\r\n      />\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport {Card} from \"antd\";\r\n\r\nimport GeolocationExample from \"./Components/GeoLocation\";\r\nimport IntlMessages from \"src/util/IntlMessages\";\r\n\r\n\r\nconst GeoLocation = () => {\r\n  return (\r\n    <Card className=\"gx-card\" title={<IntlMessages id=\"sidebar.map.geoLocation\"/>}>\r\n      <GeolocationExample/>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default GeoLocation;\r\n"],"sourceRoot":""}